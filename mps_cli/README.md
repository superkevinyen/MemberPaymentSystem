# MPS CLI - Member Payment System å‘½ä»¤è¡Œç•Œé¢

## ç°¡ä»‹

MPS CLI æ˜¯ä¸€å€‹åŸºæ–¼æ–‡å­—ç•Œé¢çš„æœƒå“¡æ”¯ä»˜ç³»çµ±å®¢æˆ¶ç«¯ï¼Œæ”¯æŒä¸‰ç¨®è§’è‰²ï¼š
- ğŸ‘¤ æœƒå“¡ç”¨æˆ¶ï¼šæŸ¥çœ‹å¡ç‰‡ã€ç”Ÿæˆ QR ç¢¼ã€å……å€¼ç­‰
- ğŸª å•†æˆ¶ç”¨æˆ¶ï¼šæƒç¢¼æ”¶æ¬¾ã€é€€æ¬¾è™•ç†ç­‰  
- ğŸ‘¨â€ğŸ’¼ ç®¡ç†å“¡ï¼šæœƒå“¡ç®¡ç†ã€å¡ç‰‡ç®¡ç†ç­‰

## å®‰è£

1. å®‰è£ä¾è³´ï¼š
```bash
pip install -r requirements.txt
```

2. é…ç½®ç’°å¢ƒè®Šé‡ï¼š
```bash
cp .env.example .env
# ç·¨è¼¯ .env æ–‡ä»¶ï¼Œå¡«å…¥æ­£ç¢ºçš„ Supabase é…ç½®
```

3. é‹è¡Œç¨‹åºï¼š
```bash
python main.py
```

## åŠŸèƒ½ç‰¹æ€§

### P0 æ ¸å¿ƒåŠŸèƒ½
- âœ… æœƒå“¡è¨»å†Šå’Œç®¡ç†
- âœ… ç”Ÿæˆä»˜æ¬¾ QR ç¢¼
- âœ… æƒç¢¼æ”¶æ¬¾
- âœ… å¡ç‰‡å……å€¼

### P1 é‡è¦åŠŸèƒ½
- âœ… é€€æ¬¾è™•ç†
- âœ… ç¶å®šå¡ç‰‡
- âœ… å‡çµå¡ç‰‡

## é …ç›®çµæ§‹

```
mps_cli/
â”œâ”€â”€ main.py                 # ä¸»å…¥å£
â”œâ”€â”€ requirements.txt        # ä¾è³´åŒ…åˆ—è¡¨
â”œâ”€â”€ .env.example           # ç’°å¢ƒè®Šé‡ç¤ºä¾‹
â”œâ”€â”€ README.md              # èªªæ˜æ–‡æª”
â”œâ”€â”€ config/                # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ settings.py        # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ supabase_client.py # Supabase å®¢æˆ¶ç«¯
â”‚   â””â”€â”€ constants.py       # å¸¸é‡å®šç¾©
â”œâ”€â”€ models/                # æ•¸æ“šæ¨¡å‹
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base.py           # åŸºç¤æ¨¡å‹é¡
â”‚   â”œâ”€â”€ member.py         # æœƒå“¡æ¨¡å‹
â”‚   â”œâ”€â”€ card.py           # å¡ç‰‡æ¨¡å‹
â”‚   â””â”€â”€ transaction.py    # äº¤æ˜“æ¨¡å‹
â”œâ”€â”€ services/              # æ¥­å‹™æœå‹™
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base_service.py   # åŸºç¤æœå‹™é¡
â”‚   â”œâ”€â”€ member_service.py # æœƒå“¡æœå‹™
â”‚   â”œâ”€â”€ payment_service.py# æ”¯ä»˜æœå‹™
â”‚   â”œâ”€â”€ merchant_service.py# å•†æˆ¶æœå‹™
â”‚   â”œâ”€â”€ admin_service.py  # ç®¡ç†æœå‹™
â”‚   â””â”€â”€ qr_service.py     # QR ç¢¼æœå‹™
â”œâ”€â”€ ui/                   # ç”¨æˆ¶ç•Œé¢
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base_ui.py        # åŸºç¤ UI çµ„ä»¶
â”‚   â”œâ”€â”€ member_ui.py      # æœƒå“¡ç•Œé¢
â”‚   â”œâ”€â”€ merchant_ui.py    # å•†æˆ¶ç•Œé¢
â”‚   â”œâ”€â”€ admin_ui.py       # ç®¡ç†å“¡ç•Œé¢
â”‚   â””â”€â”€ components/       # UI çµ„ä»¶
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ menu.py       # èœå–®çµ„ä»¶
â”‚       â”œâ”€â”€ table.py      # è¡¨æ ¼çµ„ä»¶
â”‚       â””â”€â”€ form.py       # è¡¨å–®çµ„ä»¶
â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•¸
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ validators.py     # é©—è­‰å™¨
â”‚   â”œâ”€â”€ formatters.py     # æ ¼å¼åŒ–å™¨
â”‚   â”œâ”€â”€ error_handler.py  # éŒ¯èª¤è™•ç†å™¨
â”‚   â””â”€â”€ logger.py         # æ—¥èªŒç®¡ç†
â””â”€â”€ tests/                # æ¸¬è©¦æ–‡ä»¶
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ test_services.py  # æœå‹™å±¤æ¸¬è©¦
    â””â”€â”€ test_ui.py        # UI å±¤æ¸¬è©¦
```

## ä½¿ç”¨èªªæ˜

### æœƒå“¡ç”¨æˆ¶
1. é¸æ“‡ã€Œæœƒå“¡ç”¨æˆ¶ã€è§’è‰²
2. è¼¸å…¥æœƒå“¡ ID ç™»å…¥
3. å¯é€²è¡ŒæŸ¥çœ‹å¡ç‰‡ã€ç”Ÿæˆ QR ç¢¼ã€å……å€¼ç­‰æ“ä½œ

### å•†æˆ¶ç”¨æˆ¶  
1. é¸æ“‡ã€Œå•†æˆ¶ç”¨æˆ¶ã€è§’è‰²
2. è¼¸å…¥å•†æˆ¶ä»£ç¢¼ç™»å…¥
3. å¯é€²è¡Œæƒç¢¼æ”¶æ¬¾ã€é€€æ¬¾è™•ç†ç­‰æ“ä½œ

### ç®¡ç†å“¡
1. é¸æ“‡ã€Œç®¡ç†å“¡ã€è§’è‰²
2. é€²è¡Œèº«ä»½é©—è­‰
3. å¯é€²è¡Œæœƒå“¡ç®¡ç†ã€å¡ç‰‡ç®¡ç†ç­‰æ“ä½œ

## æŠ€è¡“ç‰¹æ€§

- åŸºæ–¼ Supabase RPC å‡½æ•¸çš„å¾Œç«¯äº¤äº’
- æ”¯æŒä¸­æ–‡å­—ç¬¦å¯¬åº¦å°é½Š (wcwidth)
- å®Œå–„çš„éŒ¯èª¤è™•ç†å’Œç”¨æˆ¶æç¤º
- æ¨¡çµ„åŒ–çš„æ¶æ§‹è¨­è¨ˆ
- æ˜“æ–¼æ“´å±•çš„çµ„ä»¶ç³»çµ±

## é–‹ç™¼

### ç’°å¢ƒè¦æ±‚
- Python 3.8+
- Supabase é …ç›®

### é–‹ç™¼æ¨¡å¼
```bash
# å®‰è£é–‹ç™¼ä¾è³´
pip install -r requirements.txt

# é‹è¡Œæ¸¬è©¦
python -m pytest tests/

# é‹è¡Œç¨‹åº
python main.py