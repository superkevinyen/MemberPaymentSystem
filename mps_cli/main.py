#!/usr/bin/env python3
"""
MPS CLI - Member Payment System å‘½ä»¤è¡Œç•Œé¢
ä¸»å…¥å£ç¨‹åº
"""

import os
import sys
from pathlib import Path

# æ·»åŠ é …ç›®æ ¹ç›®éŒ„åˆ° Python è·¯å¾‘
project_root = Path(__file__).parent
sys.path.insert(0, str(project_root))

from config.settings import settings
from ui.login_ui import LoginUI
from ui.member_ui import MemberUI
from ui.merchant_ui import MerchantUI
from ui.admin_ui import AdminUI
from ui.base_ui import BaseUI
from utils.logger import setup_logging, get_logger

logger = get_logger(__name__)

def main():
    """ä¸»å…¥å£å‡½æ•¸"""
    try:
        # è¨­ç½®æ—¥èªŒ
        setup_logging()
        logger.info("MPS CLI Started")
        
        # é©—è­‰é…ç½®
        settings.validate()
        logger.info("Configuration validation passed")
        
        # æ¸¬è©¦æ•¸æ“šåº«é€£æ¥
        from config.supabase_client import supabase_client
        print("æ­£åœ¨é€£æ¥æ•¸æ“šåº«...")
        if not supabase_client.test_connection():
            print("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
            print("â•‘                          é€£æ¥å¤±æ•—                                         â•‘")
            print("â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£")
            print("â•‘  âŒ ç„¡æ³•é€£æ¥åˆ°æ•¸æ“šåº«                                                      â•‘")
            print("â•‘                                                                           â•‘")
            print("â•‘  è«‹æª¢æŸ¥ï¼š                                                                 â•‘")
            print("â•‘  1. .env æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”é…ç½®æ­£ç¢º                                           â•‘")
            print("â•‘  2. SUPABASE_URL å’Œ SUPABASE_KEY æ˜¯å¦æ­£ç¢º                                 â•‘")
            print("â•‘  3. ç¶²çµ¡é€£æ¥æ˜¯å¦æ­£å¸¸                                                      â•‘")
            print("â•‘                                                                           â•‘")
            print("â•‘  åƒè€ƒ .env.example æ–‡ä»¶é€²è¡Œé…ç½®                                           â•‘")
            print("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
            return
        print("âœ… æ•¸æ“šåº«é€£æ¥æˆåŠŸ\n")
        
        # é¡¯ç¤ºæ­¡è¿ç•Œé¢
        show_welcome()
        
        # çµ±ä¸€ç™»å…¥
        login_ui = LoginUI()
        login_result = login_ui.show_login()
        
        if not login_result:
            print("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
            print("â•‘                          æ„Ÿè¬ä½¿ç”¨                                         â•‘")
            print("â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£")
            print("â•‘  ğŸ‘‹ å†è¦‹ï¼æœŸå¾…æ‚¨çš„ä¸‹æ¬¡ä½¿ç”¨                                                â•‘")
            print("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
            return
        
        # æ ¹æ“šè§’è‰²é€²å…¥å°æ‡‰ç•Œé¢
        role = login_result["role"]
        auth_service = login_ui.auth_service
        
        try:
            if role in ["admin", "super_admin"]:
                logger.info("Starting admin interface")
                admin_ui = AdminUI(auth_service)
                admin_ui.start()
            elif role == "merchant":
                logger.info("Starting merchant interface")
                merchant_ui = MerchantUI(auth_service)
                merchant_ui.start()
            elif role == "member":
                logger.info("Starting member interface")
                member_ui = MemberUI(auth_service)
                member_ui.start()
            else:
                BaseUI.show_error(f"Unknown role: {role}")
        finally:
            # ç™»å‡º
            try:
                auth_service.logout()
                print("\nâœ… å·²å®‰å…¨ç™»å‡º")
            except:
                pass
            
    except KeyboardInterrupt:
        print("\n\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
        print("â•‘                          ç¨‹åºä¸­æ–·                                         â•‘")
        print("â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£")
        print("â•‘  ğŸ‘‹ å†è¦‹ï¼æ‚¨çš„æ“ä½œå·²ä¿å­˜                                                  â•‘")
        print("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
        logger.info("User interrupted program")
    except Exception as e:
        print("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
        print("â•‘                          ç³»çµ±éŒ¯èª¤                                         â•‘")
        print("â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£")
        print(f"â•‘  âŒ ç™¼ç”ŸéŒ¯èª¤: {str(e)[:60]:<60} â•‘")
        print("â•‘                                                                           â•‘")
        print("â•‘  è«‹è¯ç¹«æŠ€è¡“æ”¯æŒæˆ–æŸ¥çœ‹æ—¥èªŒæ–‡ä»¶ç²å–è©³ç´°ä¿¡æ¯                                 â•‘")
        print("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
        logger.error(f"System error: {e}", exc_info=True)
        sys.exit(1)
    finally:
        logger.info("MPS CLI Ended")

def show_welcome():
    """é¡¯ç¤ºæ­¡è¿ç•Œé¢ - å•†æ¥­ç‰ˆ"""
    BaseUI.clear_screen()
    print("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
    print("â•‘                                                                           â•‘")
    print("â•‘                     æ­¡è¿ä½¿ç”¨ MPS æœƒå“¡æ”¯ä»˜ç³»çµ±                             â•‘")
    print("â•‘                   Member Payment System v1.0.0                            â•‘")
    print("â•‘                                                                           â•‘")
    print("â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£")
    print("â•‘  åŠŸèƒ½ç‰¹è‰²ï¼š                                                               â•‘")
    print("â•‘  â€¢ å¤šç¨®å¡ç‰‡é¡å‹æ”¯æŒï¼ˆæ¨™æº–å¡/ä¼æ¥­å¡/ä»£é‡‘åˆ¸ï¼‰                               â•‘")
    print("â•‘  â€¢ QR ç¢¼æ”¯ä»˜ï¼Œå®‰å…¨ä¾¿æ·                                                    â•‘")
    print("â•‘  â€¢ ç©åˆ†ç­‰ç´šç³»çµ±ï¼Œè‡ªå‹•æŠ˜æ‰£                                                 â•‘")
    print("â•‘  â€¢ å®Œæ•´çš„äº¤æ˜“ç®¡ç†å’Œé€€æ¬¾æ”¯æŒ                                               â•‘")
    print("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
    print()

def member_main():
    """æœƒå“¡ç”¨æˆ¶å…¥å£ï¼ˆå·²æ£„ç”¨ï¼Œè«‹ä½¿ç”¨çµ±ä¸€ç™»å…¥ï¼‰"""
    print("âš ï¸  Please use unified login: python main.py")
    print("   This direct entry method has been deprecated")

def merchant_main():
    """å•†æˆ¶ç”¨æˆ¶å…¥å£ï¼ˆå·²æ£„ç”¨ï¼Œè«‹ä½¿ç”¨çµ±ä¸€ç™»å…¥ï¼‰"""
    print("âš ï¸  Please use unified login: python main.py")
    print("   This direct entry method has been deprecated")

def admin_main():
    """ç®¡ç†å“¡å…¥å£ï¼ˆå·²æ£„ç”¨ï¼Œè«‹ä½¿ç”¨çµ±ä¸€ç™»å…¥ï¼‰"""
    print("âš ï¸  Please use unified login: python main.py")
    print("   This direct entry method has been deprecated")

def test_connection():
    """æ¸¬è©¦æ•¸æ“šåº«é€£æ¥ - å•†æ¥­ç‰ˆ"""
    try:
        setup_logging()
        settings.validate()
        
        from config.supabase_client import supabase_client
        
        print("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
        print("â•‘                    æ•¸æ“šåº«é€£æ¥æ¸¬è©¦                                         â•‘")
        print("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
        print("\næ­£åœ¨æ¸¬è©¦é€£æ¥...")
        
        if supabase_client.test_connection():
            print("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
            print("â•‘                    é€£æ¥æˆåŠŸï¼                                             â•‘")
            print("â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£")
            
            # é¡¯ç¤ºåŸºæœ¬çµ±è¨ˆ
            try:
                result = supabase_client.rpc("test_connection", {})
                if result and result.get('stats'):
                    stats = result['stats']
                    print("â•‘  ç³»çµ±æ¦‚æ³ï¼š                                                               â•‘")
                    print(f"â•‘  â€¢ æœƒå“¡æ•¸é‡ï¼š{stats.get('members', 0):<60} â•‘")
                    print(f"â•‘  â€¢ å¡ç‰‡æ•¸é‡ï¼š{stats.get('cards', 0):<60} â•‘")
                    print(f"â•‘  â€¢ å•†æˆ¶æ•¸é‡ï¼š{stats.get('merchants', 0):<60} â•‘")
                    print(f"â•‘  â€¢ æ¸¬è©¦æ™‚é–“ï¼š{result.get('timestamp', 'N/A'):<60} â•‘")
                else:
                    print("â•‘  âš ï¸  ç„¡æ³•ç²å–ç³»çµ±çµ±è¨ˆä¿¡æ¯                                                â•‘")
                
            except Exception as e:
                print(f"â•‘  âš ï¸  çµ±è¨ˆä¿¡æ¯ç²å–å¤±æ•—: {str(e)[:50]:<50} â•‘")
            
            print("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
            print("\nâœ… æ•¸æ“šåº«é€£æ¥æ­£å¸¸ï¼Œç³»çµ±å¯ä»¥ä½¿ç”¨")
        else:
            print("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
            print("â•‘                    é€£æ¥å¤±æ•—                                               â•‘")
            print("â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£")
            print("â•‘  âŒ ç„¡æ³•é€£æ¥åˆ°æ•¸æ“šåº«                                                      â•‘")
            print("â•‘                                                                           â•‘")
            print("â•‘  è«‹æª¢æŸ¥ï¼š                                                                 â•‘")
            print("â•‘  1. .env æ–‡ä»¶æ˜¯å¦å­˜åœ¨                                                     â•‘")
            print("â•‘  2. SUPABASE_URL å’Œ SUPABASE_KEY æ˜¯å¦æ­£ç¢º                                 â•‘")
            print("â•‘  3. ç¶²çµ¡é€£æ¥æ˜¯å¦æ­£å¸¸                                                      â•‘")
            print("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
            
    except Exception as e:
        print("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
        print("â•‘                    æ¸¬è©¦å¤±æ•—                                               â•‘")
        print("â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£")
        print(f"â•‘  âŒ éŒ¯èª¤: {str(e)[:64]:<64} â•‘")
        print("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")

def show_help():
    """é¡¯ç¤ºå¹«åŠ©ä¿¡æ¯ - å•†æ¥­ç‰ˆ"""
    print("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—")
    print("â•‘                    MPS CLI ä½¿ç”¨èªªæ˜                                       â•‘")
    print("â•‘              Member Payment System v1.0.0                                 â•‘")
    print("â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£")
    print("â•‘  ä½¿ç”¨æ–¹æ³•ï¼š                                                               â•‘")
    print("â•‘                                                                           â•‘")
    print("â•‘  python main.py              å•Ÿå‹•ä¸»ç¨‹åºï¼ˆæ¨è–¦ï¼‰                           â•‘")
    print("â•‘  python main.py test         æ¸¬è©¦æ•¸æ“šåº«é€£æ¥                               â•‘")
    print("â•‘  python main.py help         é¡¯ç¤ºæ­¤å¹«åŠ©ä¿¡æ¯                               â•‘")
    print("â•‘                                                                           â•‘")
    print("â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£")
    print("â•‘  ç’°å¢ƒé…ç½®ï¼š                                                               â•‘")
    print("â•‘                                                                           â•‘")
    print("â•‘  1. è¤‡è£½ .env.example ç‚º .env                                             â•‘")
    print("â•‘  2. é…ç½® Supabase é€£æ¥ä¿¡æ¯ï¼š                                              â•‘")
    print("â•‘     - SUPABASE_URL: æ‚¨çš„ Supabase é …ç›® URL                                â•‘")
    print("â•‘     - SUPABASE_KEY: æ‚¨çš„ Supabase API Key                                 â•‘")
    print("â•‘                                                                           â•‘")
    print("â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£")
    print("â•‘  ç³»çµ±ç‰¹è‰²ï¼š                                                               â•‘")
    print("â•‘                                                                           â•‘")
    print("â•‘  âœ“ ä¸‰ç¨®è§’è‰²æ”¯æŒï¼ˆæœƒå“¡/å•†æˆ¶/ç®¡ç†å“¡ï¼‰                                       â•‘")
    print("â•‘  âœ“ å¤šç¨®å¡ç‰‡é¡å‹ï¼ˆæ¨™æº–å¡/ä¼æ¥­å¡/ä»£é‡‘åˆ¸ï¼‰                                   â•‘")
    print("â•‘  âœ“ QR ç¢¼æ”¯ä»˜ï¼Œå®‰å…¨ä¾¿æ·                                                    â•‘")
    print("â•‘  âœ“ ç©åˆ†ç­‰ç´šç³»çµ±ï¼Œè‡ªå‹•æŠ˜æ‰£                                                 â•‘")
    print("â•‘  âœ“ å®Œæ•´çš„äº¤æ˜“ç®¡ç†å’Œé€€æ¬¾æ”¯æŒ                                               â•‘")
    print("â•‘  âœ“ å°ˆæ¥­çš„ç•Œé¢è¨­è¨ˆå’ŒéŒ¯èª¤è™•ç†                                               â•‘")
    print("â•‘                                                                           â•‘")
    print("â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£")
    print("â•‘  æŠ€è¡“æ”¯æŒï¼š                                                               â•‘")
    print("â•‘                                                                           â•‘")
    print("â•‘  â€¢ æ–‡æª”ï¼šdocs/ ç›®éŒ„                                                       â•‘")
    print("â•‘  â€¢ æ¸¬è©¦ï¼špython -m pytest tests/                                          â•‘")
    print("â•‘  â€¢ æ—¥èªŒï¼šlogs/ ç›®éŒ„                                                       â•‘")
    print("â•‘                                                                           â•‘")
    print("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")

if __name__ == "__main__":
    # è™•ç†å‘½ä»¤è¡Œåƒæ•¸
    if len(sys.argv) > 1:
        command = sys.argv[1].lower()
        
        if command == "member":
            member_main()
        elif command == "merchant":
            merchant_main()
        elif command == "admin":
            admin_main()
        elif command == "test":
            test_connection()
        elif command in ["help", "-h", "--help"]:
            show_help()
        else:
            print(f"âœ— Unknown command: {command}")
            print("Use 'python main.py help' to view help information")
    else:
        main()